<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="Méthode avec Javascript pour transformer son mot de passe en texte lisible.(LVdesign.com.fr - version 1.0)">
        <meta name="viewport" content="width=device-width">
        
<style>
body{
	background: gray;
	width: 80%;
	margin: 1em auto;
}

#form-user{ background: white;}
fieldset{
text-align: left;
	margin: 2%;
	padding: 5%;
	border: 1px solid white;
	
}
form ul{
	list-style:none;
}
li{
	margin-bottom: 1em;
}
input[type="checkbox"]{
	margin-left:1em;
}
#submit{
	clear: both;
	height: 2em;
	 	line-height: 1.5;
	font-size: .9em;
	font-weight: bold;
	background-color: #ccc;
	margin-bottom: 2%;
	}</style>
</head>
<body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

        <!-- Add your site or application content here -->
       
        
        <h2>New version. See your password readable by default - Javascript solution</h2>
         <p>Le mot de passe est lisible. En le cochant il devient illisible. C'est bien, mais est-ce vraiment la meilleur idees. Je pense que l'utilisateur doit pouvoir choisir la lisibilité de son mot de passe et non qu'elle lui soit imposée</p>
        
        <form method="post" action="" id="form-user">
        	<fieldset>
        	<ul>
	        	<li><label for="nom">Nom :</label>
	        	<input type="text" name="nom" id="nom" placeholder="Votre nom" />
	        	</li>
	        	
		        	<li><label for="password">Mot de passe :</label>
		        	<input type="password" name="password" id="password" placeholder="Votre mot de passe" />
		        	</li>
		        	
	        	
	        	<li>
	        	<input type="submit" name="submit" id="submit" value="Envoyez" />
	        	</li>
	        	
        	
        	</ul>
        	</fieldset>
        </form>
               
        <script>
        	//chargement script
        	function addLoadEvent(func){
        		var oldonload = window.onload;
        		if(typeof window.onload != 'function'){
        			window.onload = func;
        			}else {
	        			window.onload = function(){
	        			oldonload();
	        			func();
	        			}
					}
				}
			
			//methode InserAfter node
			function insertAfter(newElement, targetElement)	{
				var parent = targetElement.parentNode;
					if(parent.lastChild == targetElement){
						parent.appendChild(newElement);
					}else {
					parent.insertBefore(newElement, targetElement.nextSibling);
					}
			}
						
        	// Vérification, création et action DOM
        	function prepareInputTextField(){
        	
        	'use strict';
        	if( !document.createElement) return false;
        	if( !document.createTextNode) return false;
        	if( !document.getElementById) return false;
        	
        	if( !document.getElementById('password')) return false;
        	var psw = document.getElementById('password');
        	
        	psw.setAttribute("style", "display:none");
        	
        	//psw.setAttribute(style, "display:'none'");
        	var newInput = document.createElement("input");
        			newInput.setAttribute("id", "pswlisible");
        			newInput.setAttribute("type", "text");
		        	newInput.setAttribute("style", "display:inline-block");
        	
        	insertAfter(newInput,psw);
        	//
        	var id = "password";
        	
        	var text_field = document.createElement("div");
        		text_field.innerHTML='<span class="pswToggle"><input type="checkbox" id="'+id+'-checkbox"><label for="'+id+'-checkbox ">cachez le mot de passe ? </label></span>';
	        insertAfter(text_field,newInput);
        	
        	//
        	var check = document.getElementById("password-checkbox");
        	
        	        	
        	//affiche
        	check.onclick = function() {
        		if( this.checked != false){ 
	        		document.getElementById('password-checkbox').setAttribute('checked', 'checked');
	        		
	        		var text_psw = document.getElementById('password').value ;
	        		var input_txt = document.getElementById('pswlisible').value ;
	        		
	        		psw.value = input_txt;
	        		
	        		newInput.style.display="none";
		        	psw.style.display = 'inline-block';
	        	
	        	}else{
	        	document.getElementById('password-checkbox').removeAttribute('checked');
	        	var text_psw = document.getElementById('password').value ;
	        	psw.value = null;
	        	newInput.style.display='inline-block';
	        	psw.style.display = 'none';
	        	}
        	}
        	
      }	//endprepareInputField
        	
       addLoadEvent(prepareInputTextField);
      </script>
</body>
</html>